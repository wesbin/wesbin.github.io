{"componentChunkName":"component---src-templates-blog-post-js","path":"/Gradle에서_Runnable.jar_만들기/","result":{"data":{"site":{"siteMetadata":{"title":"wesbin"}},"markdownRemark":{"id":"83ac42a4-b52c-5ff1-9c37-948eaa7bf68c","excerpt":"Gradle을 이용해서 Runnable.jar를 만들기 위해선 설정이 필요합니다. 설정 없이 jar를 만들어보면 처음에는 Manifest가 없다고 할 겁니다! \n그러면 아래와 같이 build.gradle에 코드를 추가해주세요. attributes 중 Version…","html":"<p>Gradle을 이용해서 Runnable.jar를 만들기 위해선 설정이 필요합니다. 설정 없이 jar를 만들어보면 처음에는 Manifest가 없다고 할 겁니다!\n그러면 아래와 같이 build.gradle에 코드를 추가해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mainClassName = &#39;wesbin.toy.blog&#39;\nversion = &#39;1.0&#39;\n\njar {\n    manifest {\n        attributes &#39;Version&#39;: version, &#39;Main-Class&#39;: mainClassName\n    }\n}</code></pre></div>\n<p>attributes 중 Version은 없어도 됩니다. Main-Class만 입력하면 동작해요.\nmainClassName은 내가 jar를 실행할 때 실행하고 싶은 Class를 지정해주면 됩니다.\n아래의 코드를 참고하시면 금방 어떻게 작성해 넣어야 하는지 아실 거에요.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">package wesbin.tory\n\nimport ...\n\npublic class Blog {\n\n~~\n    \n}</code></pre></div>\n<p>이렇게만 해도 jar를 만들어 실행하면 되는 분이 계실 겁니다.\n하지만 자기가 dependencies를 추가하여 코드를 작성하셨다면 ClassNotFoundException이 반기지 않을까 생각합니다.\n<del>저도 그랬거든요. 젠장. 한 번에 되는 꼴이 없죠. 역시.</del> 만든 jar를 열어보면 작성한 코드만 있을 뿐 dependencies는 어디에도 없죠. 그러면 역시 검색이죠.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jar {\n    manifest {\n        attributes &#39;Version&#39;: version, &#39;Main-Class&#39;: mainClassName\n    }\n    from {\n        configurations.compile.collect {\n            it.isDirectory() ? it : zipTree(it)\n        }\n    }\n}</code></pre></div>\n<p>하지만 이번에도 역시! 안됩니다. 이유는 dependencies를 추가할 때 사용한 방식이 compile을 사용했는가 혹은 implementation을 사용했는가입니다.\nimplementation을 compile로 바꾸고 위의 코드를 사용하면 jar에 dependencies가 제대로 추가된 모습을 볼 수 있죠.</p>\n<p><del><strong>하지만!! 자존심이 허락하지 않습니다!! implementation!!</strong></del></p>\n<p>하하… 아닙니다. 조금 더 그럴듯한 이유가 있습니다. compile은 gradle 3.0버전부터 deprecated 되었습니다.\n그리고 gradle 7.0버전에서는 삭제될 예정입니다(길게도 살아남았네요). 아래는 Gradle 6.8.1 User Manual에서 가져온 사진입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd75e04ac4d22de21289b1489dc72154/5e3a3/Gradle_6.8.1_The_Java_Library_plugin_configurations.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.177215189873415%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjElEQVQY03VPO0/CUBi9i4OJv8Ff4MrkPzBGSVxMjH/AwVkH4+rCpJODOhhfQC2xQaMIiI+0UBDCBcobCkgLllIpj77utZHZk5Mv50vOl+8cYCFLQ+rO+4LzCmwSc8sX4AxuFUahFR844pwYY8PSDaRbyLS1PU1k2JyuAP8Byg++jOu+ekgUD2p6rC7lfbUDuk6aOsL/AyS/qZhIsE2qoiTwCOvVgf71o5SaWMWtYS5YOWU7t7Rww/XDtjunhBjhhm67M3IAYQtsh+fXvTNL58AFl8epSvz4pHhNli+ISZw7TGw4r8EmObt6CfbfFu3j3RfHmgesucEe7dDRBEh6TUVNXkqppjgNgyaaJiujH1XSBNnk6/2sZPDlbrYnSd+DandYEAZZA8sYYWB3ipY7VJS7oyHFQoJJfhR5C+Mx32qHGf7ZJt0IMMNknu8pJA390TzFcP5Y7hGWgIGsUJH3sGlfkiPjOW8sw9QE+79WaYhPkXbwVQy+iYGIloCN/pD45MhE9jae8bKQSpd/AYdqVtOMrfhZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Gradle 6.8.1 The Java Library plugin configurations\"\n        title=\"Gradle 6.8.1 The Java Library plugin configurations\"\n        src=\"/static/dd75e04ac4d22de21289b1489dc72154/f058b/Gradle_6.8.1_The_Java_Library_plugin_configurations.png\"\n        srcset=\"/static/dd75e04ac4d22de21289b1489dc72154/c26ae/Gradle_6.8.1_The_Java_Library_plugin_configurations.png 158w,\n/static/dd75e04ac4d22de21289b1489dc72154/6bdcf/Gradle_6.8.1_The_Java_Library_plugin_configurations.png 315w,\n/static/dd75e04ac4d22de21289b1489dc72154/f058b/Gradle_6.8.1_The_Java_Library_plugin_configurations.png 630w,\n/static/dd75e04ac4d22de21289b1489dc72154/5e3a3/Gradle_6.8.1_The_Java_Library_plugin_configurations.png 763w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>주목할 부분은 implementation과 compileClasspath.\n그리고 Stack Overflow의 답변 중 휠을 내려 조금 아래에 있는 답변에서 찾은 코드.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">jar {\n    manifest {\n        attributes &#39;Version&#39;: version, &#39;Main-Class&#39;: mainClassName\n    }\n    from {\n        configurations.compileClasspath.collect {\n            it.isDirectory() ? it : zipTree(it)\n        }\n    }\n}</code></pre></div>\n<p>이러면 완벽합니다. <strong>dependencies를 추가할 때 사용한 방식이 complie이면 complie, implementation이면 compileClasspath를 사용하면 된다.</strong> 끝!</p>","frontmatter":{"title":"Gradle에서 Runnable.jar 만들기","date":"March 17, 2021","description":"Gradle에서 Runnable.jar 만들기"}},"previous":null,"next":{"fields":{"slug":"/좌충우돌_우분투_패키지_업데이트/"},"frontmatter":{"title":"우분투 패키지 업데이트"}}},"pageContext":{"id":"83ac42a4-b52c-5ff1-9c37-948eaa7bf68c","previousPostId":null,"nextPostId":"8d53a335-fda3-55f9-bde9-2d26af2b8aba"}},"staticQueryHashes":["3000541721"]}